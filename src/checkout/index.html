<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartHome | Checkout</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/checkout.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
      emailjs.init("Z0IJnm4Z6YDaat71K");
    </script>
    <script src="/js/checkout.js" type="module"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè†</text></svg>">
  </head>
  <body>
    <header class="main-header">
      <div class="header-container">
        <div class="logo-section">
          <img src="/images/logos/smarthome.png" alt="SmartHome Logo" class="logo" onerror="this.style.display='none'">
          <a href="/index.html" class="logo-text">Smart <span class="highlight">HOME</span></a>
        </div>
        
        <div class="search-section">
          <div class="search-container">
            <input type="text" class="search-input" placeholder="Search for a product...">
            <button class="search-btn">
              <span class="search-icon">üîç</span>
            </button>
          </div>
        </div>
        
        <div class="cart-section">
          <img src="/images/icon/cart.png" alt="Shopping Cart" class="cart-icon" onerror="this.style.display='none'">
          <span class="cart-count">0</span>
        </div>
      </div>
    </header>

    <main class="divider">
      <h1>Finalize Order</h1>
      
      <div class="checkout-layout">
        <section class="checkout-form">
          <h2>Payment Information</h2>
          <form id="checkout-form">
            <fieldset>
              <legend>Personal information</legend>
              <div class="form-group">
                <label for="fname">First name *</label>
                <input type="text" id="fname" name="fname" required>
              </div>
              <div class="form-group">
                <label for="lname">Name *</label>
                <input type="text" id="lname" name="lname" required>
              </div>
              <div class="form-group">
  <label for="email">Email *</label>
  <input type="email" id="email" name="email" required 
         title="Please enter a valid email address">
</div>
            </fieldset>

            <fieldset>
              <legend>Delivery Address</legend>
              <div class="form-group">
                <label for="street">Address *</label>
                <input type="text" id="street" name="street" required>
              </div>
              <div class="form-group">
                <label for="city">City *</label>
                <input type="text" id="city" name="city" required>
              </div>
              <div class="form-group">
                <label for="state">State *</label>
                <input type="text" id="state" name="state" required>
              </div>
              <div class="form-group">
                <label for="zip">Postal Code *</label>
                <input type="text" id="zip" name="zip" required>
              </div>
            </fieldset>

            <fieldset>
              <legend>Payment Information</legend>
              <div class="form-group">
                <label for="cardNumber">Credit Card Number *</label>
                <input type="text" id="cardNumber" name="cardNumber" required 
                       pattern="[0-9\s]{13,19}" 
                       maxlength="19"
                       placeholder="**** **** **** ****">
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="expiration">Exp. Date *</label>
                  <input type="text" id="expiration" name="expiration" required placeholder="MM/YY"
                         pattern="(0[1-9]|1[0-2])\/([0-9]{2})"
                         title="Format: MM/YY">
                </div>
                <div class="form-group">
                  <label for="code">Security Code *</label>
                  <input type="text" id="code" name="code" required 
                         pattern="[0-9]{3,4}"
                         maxlength="3"
                         placeholder="***">
                </div>
              </div>
            </fieldset>

            <button type="submit" class="btn-primary">Payment</button>
          </form>
        </section>

        <section class="order-summary">
  <h2>Order summary</h2>
  <div id="cart-items"></div>
  <div class="order-totals">
    <div class="total-line"><span>Subtotal:</span><span id="item-total">$0.00</span></div>
    <div class="total-line"><span>Taxes (6%):</span><span id="tax">$0.00</span></div>
    <div class="total-line"><span>Shipping Costs:</span><span id="shipping">$0.00</span></div>
    <div class="total-line grand-total"><span>Total:</span><span id="order-total">$0.00</span></div>
  </div>
</section>
      </div>
    </main>

    <!-- Modal de confirmation -->
    <div id="confirmation-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Confirm Your Purchase</h3>
          <span class="close-modal">&times;</span>
        </div>
        <div class="modal-body">
          <div class="order-review">
            <h4>Order Details</h4>
            <div id="order-review-items"></div>
            <div class="order-review-total">
              <strong>Total: $<span id="review-total">0.00</span></strong>
            </div>
          </div>
          <p>Are you sure you want to proceed with this purchase?</p>
        </div>
        <div class="modal-actions">
          <button id="confirm-yes" class="btn-primary">Yes, Confirm Purchase</button>
          <button id="confirm-no" class="btn-secondary">No, Cancel</button>
        </div>
      </div>
    </div>

    <footer id="main-footer"></footer>
  </body>
</html>